(()=>{const e=document.getElementById("addTask"),t=document.getElementById("modal"),a=document.getElementById("overlay"),d=document.getElementById("closeModal"),s=document.getElementById("projects"),n=document.querySelector("[data-new-list-form]"),i=document.querySelector("[data-new-list-input]"),l=document.getElementById("taskPad"),c=document.getElementById("submitTask");e.addEventListener("click",(()=>{t.style.display="flex",a.style.opacity=1})),d.addEventListener("click",(()=>{t.style.display="none",a.style.opacity=0}));const o="taskPad.lists";let r=JSON.parse(localStorage.getItem(o))||[];function m(e,t,a,d){this.title=e,this.description=t,this.priority=a,this.date=d}c.addEventListener("click",(e=>{e.preventDefault(),t.style.display="none",a.style.opacity=0,E(document.getElementById("taskContent"));const d=document.getElementById("taskForm"),s=document.getElementById("taskTitle"),n=document.getElementById("taskDescription"),i=document.getElementById("taskPriority"),l=document.getElementById("taskDate");let c=new m(s.value,n.value,i.value,l.value);"taskPad"===h?r.unshift(c):k.find((e=>e.id===h)).tasks.unshift(c),v(),d.reset()}));const u="task.lists",p="task.selectedListId";let k=JSON.parse(localStorage.getItem(u))||[],h=localStorage.getItem(p);function v(){localStorage.setItem(u,JSON.stringify(k)),localStorage.setItem(o,JSON.stringify(r)),localStorage.setItem(p,h),y()}function y(){E(s),k.forEach((e=>{const t=document.createElement("button");t.classList.add("project-item","project-hover"),t.dataset.listId=e.id,t.innerText=e.name;const a=document.createElement("i");a.classList.add("fa","fa-trash","project-delete-button"),a.addEventListener("click",(()=>{s.removeChild(t),k=k.filter((e=>e.id!==t.dataset.listId)),v()})),t.appendChild(a),e.id===h&&(t.classList.add("active-list"),t.classList.remove("project-hover")),s.appendChild(t)})),function(){const e=document.getElementById("taskContent");E(e);let t="taskPad"===h?r:k.find((e=>e.id===h)).tasks;t.forEach((a=>{const d=document.createElement("div");d.classList.add("task-item");let s=document.createElement("div");s.classList.add("task-item-priority"),s.innerText=a.priority;let n=document.createElement("div");n.classList.add("task-item-due-date"),n.innerText=a.date;let i=document.createElement("h4");i.innerText=a.title;const l=document.createElement("p");l.classList.add("item-description"),l.innerText=a.description;let c=document.createElement("div");c.classList.add("checkbox-group");let o=document.createElement("input");o.addEventListener("click",(a=>{e.removeChild(d),t.splice(d,1),v()})),o.classList.add("checkbox-input"),o.type="checkbox",o.name="checkbox";let m=document.createElement("label");m.for="checkbox",m.classList.add("label-checkbox"),m.innerText="Completed",c.appendChild(o),c.appendChild(m);let u=document.createElement("i");u.classList.add("fa","fa-trash","delete-task"),u.addEventListener("click",(()=>{if("taskPad"===h)r=r.filter((e=>e!==a));else{let e=k.find((e=>e.id===h));t=e.tasks.filter((e=>e!==a)),e.tasks=t}v()})),d.appendChild(u),d.appendChild(c),d.appendChild(i),d.appendChild(l),d.appendChild(n),d.appendChild(s),e.appendChild(d)}))}()}function E(e){for(;e.firstChild;)e.removeChild(e.firstChild)}l.addEventListener("click",(e=>{h="taskPad",l.classList.add("active-list"),l.classList.remove("project-hover"),v()})),s.addEventListener("click",(e=>{"button"===e.target.tagName.toLowerCase()&&(h=e.target.dataset.listId,l.classList.add("project-hover"),l.classList.remove("active-list"),k.find((e=>e.id===h)),v())})),n.addEventListener("submit",(e=>{e.preventDefault();const t=i.value;if(null===t||""===t)return alert("Project must have a name.");const a=(d=t,{id:Date.now().toString(),name:d,tasks:[]});var d;i.value=null,k.push(a),v()})),y()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QU1oRCxHQU1Za0IsRUFOTTZCLEVBT2pCLENBQUU5QyxHQUFJZ0QsS0FBS0MsTUFBTUMsV0FBWWpDLEtBQU1BLEVBQU1oQixNQUFPLEtBRHpELElBQW9CZ0IsRUFMbEIvQyxFQUFhd0IsTUFBUSxLQUNyQkcsRUFBTXNELEtBQUtwRCxHQUNYRyxHQUFlLElBMkRqQk0sRyIsInNvdXJjZXMiOlsid2VicGFjazovL3RvLWRvLWxpc3QvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgYWRkVGFza0Zvcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkZFRhc2tcIik7XG5jb25zdCBtb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibW9kYWxcIik7XG5jb25zdCBvdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJvdmVybGF5XCIpO1xuY29uc3QgY2xvc2VNb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2xvc2VNb2RhbFwiKTtcbmNvbnN0IHByb2plY3RDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb2plY3RzXCIpO1xuY29uc3QgbmV3TGlzdEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiW2RhdGEtbmV3LWxpc3QtZm9ybV1cIik7XG5jb25zdCBuZXdMaXN0SW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiW2RhdGEtbmV3LWxpc3QtaW5wdXRdXCIpO1xuY29uc3QgdGFza1BhZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGFza1BhZFwiKTtcblxuY29uc3Qgc3VibWl0VGFza0Zvcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInN1Ym1pdFRhc2tcIik7XG5cbi8vIG1vZGFsIGxvZ2ljXG5hZGRUYXNrRm9ybS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XG4gIG92ZXJsYXkuc3R5bGUub3BhY2l0eSA9IDE7XG59KTtcblxuY2xvc2VNb2RhbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gIG92ZXJsYXkuc3R5bGUub3BhY2l0eSA9IDA7XG59KTtcbi8vIG1vZGFsIGxvZ2ljIF5eXG5cbmNvbnN0IExPQ0FMX1NUT1JBR0VfTElTVF9UQVNLUEFEX0tFWSA9IFwidGFza1BhZC5saXN0c1wiO1xubGV0IHRhc2tQYWRMaXN0cyA9XG4gIEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oTE9DQUxfU1RPUkFHRV9MSVNUX1RBU0tQQURfS0VZKSkgfHwgW107XG5cbnN1Ym1pdFRhc2tGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgb3ZlcmxheS5zdHlsZS5vcGFjaXR5ID0gMDtcblxuICBjb25zdCB0YXNrQ29udGVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGFza0NvbnRlbnRcIik7XG4gIGNsZWFyRWxlbWVudCh0YXNrQ29udGVudCk7XG5cbiAgY29uc3QgZm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGFza0Zvcm1cIik7XG4gIGNvbnN0IHRpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0YXNrVGl0bGVcIik7XG4gIGNvbnN0IGRlc2NyaXB0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0YXNrRGVzY3JpcHRpb25cIik7XG4gIGNvbnN0IHByaW9yaXR5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0YXNrUHJpb3JpdHlcIik7XG4gIGNvbnN0IGRhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRhc2tEYXRlXCIpO1xuXG4gIGxldCB0YXNrID0gbmV3IGNyZWF0ZVRhc2soXG4gICAgdGl0bGUudmFsdWUsXG4gICAgZGVzY3JpcHRpb24udmFsdWUsXG4gICAgcHJpb3JpdHkudmFsdWUsXG4gICAgZGF0ZS52YWx1ZVxuICApO1xuXG4gIGlmIChzZWxlY3RlZExpc3RJZCA9PT0gXCJ0YXNrUGFkXCIpIHtcbiAgICB0YXNrUGFkTGlzdHMudW5zaGlmdCh0YXNrKTtcbiAgfSBlbHNlIHtcbiAgICBsZXQgcHJvamVjdExpc3QgPSBsaXN0cy5maW5kKChsaXN0KSA9PiB7XG4gICAgICByZXR1cm4gbGlzdC5pZCA9PT0gc2VsZWN0ZWRMaXN0SWQ7XG4gICAgfSk7XG4gICAgcHJvamVjdExpc3QudGFza3MudW5zaGlmdCh0YXNrKTtcbiAgfVxuXG4gIHNhdmVBbmRSZW5kZXIoKTtcbiAgZm9ybS5yZXNldCgpO1xufSk7XG5cbmZ1bmN0aW9uIGxpc3RJZGVudGlmeWllcigpIHtcbiAgaWYgKHNlbGVjdGVkTGlzdElkID09PSBcInRhc2tQYWRcIikge1xuICAgIGxldCB0YXNrTGlzdCA9IHRhc2tQYWRMaXN0cztcbiAgICByZXR1cm4gdGFza0xpc3Q7XG4gIH0gZWxzZSB7XG4gICAgbGV0IHByb2plY3RMaXN0ID0gbGlzdHMuZmluZCgobGlzdCkgPT4ge1xuICAgICAgcmV0dXJuIGxpc3QuaWQgPT09IHNlbGVjdGVkTGlzdElkO1xuICAgIH0pO1xuICAgIGxldCB0YXNrTGlzdCA9IHByb2plY3RMaXN0LnRhc2tzO1xuICAgIHJldHVybiB0YXNrTGlzdDtcbiAgfVxufVxuXG5mdW5jdGlvbiByZW5kZXJUYXNrcygpIHtcbiAgY29uc3QgdGFza0NvbnRlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRhc2tDb250ZW50XCIpO1xuICBjbGVhckVsZW1lbnQodGFza0NvbnRlbnQpO1xuXG4gIGxldCB0YXNrTGlzdCA9IGxpc3RJZGVudGlmeWllcigpO1xuXG4gIHRhc2tMaXN0LmZvckVhY2goKHRhc2spID0+IHtcbiAgICBjb25zdCB0YXNrSXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgdGFza0l0ZW0uY2xhc3NMaXN0LmFkZChcInRhc2staXRlbVwiKTtcblxuICAgIGxldCBwcmlvcml0eUl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIHByaW9yaXR5SXRlbS5jbGFzc0xpc3QuYWRkKFwidGFzay1pdGVtLXByaW9yaXR5XCIpO1xuICAgIHByaW9yaXR5SXRlbS5pbm5lclRleHQgPSB0YXNrLnByaW9yaXR5O1xuICAgIGxldCBkYXRlSXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgZGF0ZUl0ZW0uY2xhc3NMaXN0LmFkZChcInRhc2staXRlbS1kdWUtZGF0ZVwiKTtcbiAgICBkYXRlSXRlbS5pbm5lclRleHQgPSB0YXNrLmRhdGU7XG4gICAgbGV0IHRpdGxlSXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoNFwiKTtcbiAgICB0aXRsZUl0ZW0uaW5uZXJUZXh0ID0gdGFzay50aXRsZTtcbiAgICBjb25zdCBkZXNjcmlwdGlvbkl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgICBkZXNjcmlwdGlvbkl0ZW0uY2xhc3NMaXN0LmFkZChcIml0ZW0tZGVzY3JpcHRpb25cIik7XG4gICAgZGVzY3JpcHRpb25JdGVtLmlubmVyVGV4dCA9IHRhc2suZGVzY3JpcHRpb247XG5cbiAgICBsZXQgY2hlY2tib3hHcm91cCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgY2hlY2tib3hHcm91cC5jbGFzc0xpc3QuYWRkKFwiY2hlY2tib3gtZ3JvdXBcIik7XG4gICAgbGV0IGNoZWNrYm94SXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICBjaGVja2JveEl0ZW0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgICB0YXNrQ29udGVudC5yZW1vdmVDaGlsZCh0YXNrSXRlbSk7XG4gICAgICB0YXNrTGlzdC5zcGxpY2UodGFza0l0ZW0sIDEpO1xuXG4gICAgICBzYXZlQW5kUmVuZGVyKCk7XG4gICAgfSk7XG4gICAgY2hlY2tib3hJdGVtLmNsYXNzTGlzdC5hZGQoXCJjaGVja2JveC1pbnB1dFwiKTtcbiAgICBjaGVja2JveEl0ZW0udHlwZSA9IFwiY2hlY2tib3hcIjtcbiAgICBjaGVja2JveEl0ZW0ubmFtZSA9IFwiY2hlY2tib3hcIjtcbiAgICBsZXQgbGFiZWxJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxhYmVsXCIpO1xuICAgIGxhYmVsSXRlbS5mb3IgPSBcImNoZWNrYm94XCI7XG4gICAgbGFiZWxJdGVtLmNsYXNzTGlzdC5hZGQoXCJsYWJlbC1jaGVja2JveFwiKTtcbiAgICBsYWJlbEl0ZW0uaW5uZXJUZXh0ID0gXCJDb21wbGV0ZWRcIjtcbiAgICBjaGVja2JveEdyb3VwLmFwcGVuZENoaWxkKGNoZWNrYm94SXRlbSk7XG4gICAgY2hlY2tib3hHcm91cC5hcHBlbmRDaGlsZChsYWJlbEl0ZW0pO1xuXG4gICAgbGV0IGRlbGV0ZUl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaVwiKTtcbiAgICBkZWxldGVJdGVtLmNsYXNzTGlzdC5hZGQoXCJmYVwiLCBcImZhLXRyYXNoXCIsIFwiZGVsZXRlLXRhc2tcIik7XG4gICAgZGVsZXRlSXRlbS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgaWYgKHNlbGVjdGVkTGlzdElkID09PSBcInRhc2tQYWRcIikge1xuICAgICAgICB0YXNrUGFkTGlzdHMgPSB0YXNrUGFkTGlzdHMuZmlsdGVyKCh0b2RvKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIHRvZG8gIT09IHRhc2s7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGV0IGN1cnJMaXN0ID0gbGlzdHMuZmluZCgobGlzdCkgPT4ge1xuICAgICAgICAgIHJldHVybiBsaXN0LmlkID09PSBzZWxlY3RlZExpc3RJZDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGFza0xpc3QgPSBjdXJyTGlzdC50YXNrcy5maWx0ZXIoKHRvZG9zKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIHRvZG9zICE9PSB0YXNrO1xuICAgICAgICB9KTtcblxuICAgICAgICBjdXJyTGlzdC50YXNrcyA9IHRhc2tMaXN0O1xuICAgICAgfVxuICAgICAgc2F2ZUFuZFJlbmRlcigpO1xuICAgIH0pO1xuXG4gICAgdGFza0l0ZW0uYXBwZW5kQ2hpbGQoZGVsZXRlSXRlbSk7XG4gICAgdGFza0l0ZW0uYXBwZW5kQ2hpbGQoY2hlY2tib3hHcm91cCk7XG4gICAgdGFza0l0ZW0uYXBwZW5kQ2hpbGQodGl0bGVJdGVtKTtcbiAgICB0YXNrSXRlbS5hcHBlbmRDaGlsZChkZXNjcmlwdGlvbkl0ZW0pO1xuICAgIHRhc2tJdGVtLmFwcGVuZENoaWxkKGRhdGVJdGVtKTtcbiAgICB0YXNrSXRlbS5hcHBlbmRDaGlsZChwcmlvcml0eUl0ZW0pO1xuXG4gICAgdGFza0NvbnRlbnQuYXBwZW5kQ2hpbGQodGFza0l0ZW0pO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlVGFzaygpIHtcbiAgaWYgKHNlbGVjdGVkTGlzdElkID09PSBcInRhc2tQYWRcIikge1xuICAgIHRhc2tQYWRMaXN0cyA9IHRhc2tQYWRMaXN0cy5maWx0ZXIoKHRvZG8pID0+IHtcbiAgICAgIHJldHVybiB0b2RvICE9PSB0YXNrO1xuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIGxldCBjdXJyTGlzdCA9IGxpc3RzLmZpbmQoKGxpc3QpID0+IHtcbiAgICAgIHJldHVybiBsaXN0LmlkID09PSBzZWxlY3RlZExpc3RJZDtcbiAgICB9KTtcbiAgICBjdXJyTGlzdCA9IGN1cnJMaXN0LnRhc2tzLmZpbHRlcigodG9kbykgPT4ge1xuICAgICAgcmV0dXJuIHRvZG8gIT09IHRhc2s7XG4gICAgfSk7XG4gIH1cbn1cbmZ1bmN0aW9uIGNyZWF0ZVRhc2sodGl0bGUsIGRlc2NyaXB0aW9uLCBwcmlvcml0eSwgZGF0ZSkge1xuICB0aGlzLnRpdGxlID0gdGl0bGU7XG4gIHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcbiAgdGhpcy5wcmlvcml0eSA9IHByaW9yaXR5O1xuICB0aGlzLmRhdGUgPSBkYXRlO1xufVxuXG5jb25zdCBMT0NBTF9TVE9SQUdFX0xJU1RfS0VZID0gXCJ0YXNrLmxpc3RzXCI7XG5jb25zdCBMT0NBTF9TVE9SQUdFX1NFTEVDVEVEX0xJU1RfSURfS0VZID0gXCJ0YXNrLnNlbGVjdGVkTGlzdElkXCI7XG5cbmxldCBsaXN0cyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oTE9DQUxfU1RPUkFHRV9MSVNUX0tFWSkpIHx8IFtdO1xubGV0IHNlbGVjdGVkTGlzdElkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oTE9DQUxfU1RPUkFHRV9TRUxFQ1RFRF9MSVNUX0lEX0tFWSk7XG5cbnRhc2tQYWQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gIHNlbGVjdGVkTGlzdElkID0gXCJ0YXNrUGFkXCI7XG4gIHRhc2tQYWQuY2xhc3NMaXN0LmFkZChcImFjdGl2ZS1saXN0XCIpO1xuICB0YXNrUGFkLmNsYXNzTGlzdC5yZW1vdmUoXCJwcm9qZWN0LWhvdmVyXCIpO1xuICBzYXZlQW5kUmVuZGVyKCk7XG59KTtcblxucHJvamVjdENvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgaWYgKGUudGFyZ2V0LnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gXCJidXR0b25cIikge1xuICAgIHNlbGVjdGVkTGlzdElkID0gZS50YXJnZXQuZGF0YXNldC5saXN0SWQ7XG4gICAgdGFza1BhZC5jbGFzc0xpc3QuYWRkKFwicHJvamVjdC1ob3ZlclwiKTtcbiAgICB0YXNrUGFkLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmUtbGlzdFwiKTtcblxuICAgIGxldCBwcm9qZWN0TGlzdCA9IGxpc3RzLmZpbmQoKGxpc3QpID0+IHtcbiAgICAgIHJldHVybiBsaXN0LmlkID09PSBzZWxlY3RlZExpc3RJZDtcbiAgICB9KTtcbiAgICBzYXZlQW5kUmVuZGVyKCk7XG4gIH1cbn0pO1xuXG5uZXdMaXN0Rm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XG4gIGUucHJldmVudERlZmF1bHQoKTtcbiAgY29uc3QgbGlzdE5hbWUgPSBuZXdMaXN0SW5wdXQudmFsdWU7XG4gIGlmIChsaXN0TmFtZSA9PT0gbnVsbCB8fCBsaXN0TmFtZSA9PT0gXCJcIilcbiAgICByZXR1cm4gYWxlcnQoXCJQcm9qZWN0IG11c3QgaGF2ZSBhIG5hbWUuXCIpO1xuICBjb25zdCBsaXN0ID0gY3JlYXRlTGlzdChsaXN0TmFtZSk7XG4gIG5ld0xpc3RJbnB1dC52YWx1ZSA9IG51bGw7XG4gIGxpc3RzLnB1c2gobGlzdCk7XG4gIHNhdmVBbmRSZW5kZXIoKTtcbn0pO1xuXG5mdW5jdGlvbiBjcmVhdGVMaXN0KG5hbWUpIHtcbiAgcmV0dXJuIHsgaWQ6IERhdGUubm93KCkudG9TdHJpbmcoKSwgbmFtZTogbmFtZSwgdGFza3M6IFtdIH07XG59XG5cbmZ1bmN0aW9uIHNhdmVBbmRSZW5kZXIoKSB7XG4gIHNhdmUoKTtcbiAgcmVuZGVyKCk7XG59XG5cbmZ1bmN0aW9uIHNhdmUoKSB7XG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKExPQ0FMX1NUT1JBR0VfTElTVF9LRVksIEpTT04uc3RyaW5naWZ5KGxpc3RzKSk7XG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFxuICAgIExPQ0FMX1NUT1JBR0VfTElTVF9UQVNLUEFEX0tFWSxcbiAgICBKU09OLnN0cmluZ2lmeSh0YXNrUGFkTGlzdHMpXG4gICk7XG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKExPQ0FMX1NUT1JBR0VfU0VMRUNURURfTElTVF9JRF9LRVksIHNlbGVjdGVkTGlzdElkKTtcbn1cblxuZnVuY3Rpb24gcmVuZGVyKCkge1xuICBjbGVhckVsZW1lbnQocHJvamVjdENvbnRhaW5lcik7XG4gIHJlbmRlckxpc3QoKTtcbiAgcmVuZGVyVGFza3MoKTtcbn1cblxuZnVuY3Rpb24gcmVuZGVyTGlzdCgpIHtcbiAgbGlzdHMuZm9yRWFjaCgobGlzdCkgPT4ge1xuICAgIGNvbnN0IHByb2plY3RCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgIHByb2plY3RCdXR0b24uY2xhc3NMaXN0LmFkZChcInByb2plY3QtaXRlbVwiLCBcInByb2plY3QtaG92ZXJcIik7XG4gICAgcHJvamVjdEJ1dHRvbi5kYXRhc2V0Lmxpc3RJZCA9IGxpc3QuaWQ7XG4gICAgcHJvamVjdEJ1dHRvbi5pbm5lclRleHQgPSBsaXN0Lm5hbWU7XG5cbiAgICBjb25zdCBkZWxldGVMaXN0SWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpXCIpO1xuICAgIGRlbGV0ZUxpc3RJY29uLmNsYXNzTGlzdC5hZGQoXCJmYVwiLCBcImZhLXRyYXNoXCIsIFwicHJvamVjdC1kZWxldGUtYnV0dG9uXCIpO1xuICAgIGRlbGV0ZUxpc3RJY29uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICBwcm9qZWN0Q29udGFpbmVyLnJlbW92ZUNoaWxkKHByb2plY3RCdXR0b24pO1xuICAgICAgbGlzdHMgPSBsaXN0cy5maWx0ZXIoKGxpc3QpID0+IGxpc3QuaWQgIT09IHByb2plY3RCdXR0b24uZGF0YXNldC5saXN0SWQpO1xuICAgICAgc2F2ZUFuZFJlbmRlcigpO1xuICAgIH0pO1xuXG4gICAgcHJvamVjdEJ1dHRvbi5hcHBlbmRDaGlsZChkZWxldGVMaXN0SWNvbik7XG5cbiAgICBpZiAobGlzdC5pZCA9PT0gc2VsZWN0ZWRMaXN0SWQpIHtcbiAgICAgIHByb2plY3RCdXR0b24uY2xhc3NMaXN0LmFkZChcImFjdGl2ZS1saXN0XCIpO1xuICAgICAgcHJvamVjdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwicHJvamVjdC1ob3ZlclwiKTtcbiAgICB9XG5cbiAgICBwcm9qZWN0Q29udGFpbmVyLmFwcGVuZENoaWxkKHByb2plY3RCdXR0b24pO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gY2xlYXJFbGVtZW50KGVsZW1lbnQpIHtcbiAgd2hpbGUgKGVsZW1lbnQuZmlyc3RDaGlsZCkge1xuICAgIGVsZW1lbnQucmVtb3ZlQ2hpbGQoZWxlbWVudC5maXJzdENoaWxkKTtcbiAgfVxufVxuXG5yZW5kZXIoKTtcbiJdLCJuYW1lcyI6WyJhZGRUYXNrRm9ybSIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJtb2RhbCIsIm92ZXJsYXkiLCJjbG9zZU1vZGFsIiwicHJvamVjdENvbnRhaW5lciIsIm5ld0xpc3RGb3JtIiwicXVlcnlTZWxlY3RvciIsIm5ld0xpc3RJbnB1dCIsInRhc2tQYWQiLCJzdWJtaXRUYXNrRm9ybSIsImFkZEV2ZW50TGlzdGVuZXIiLCJzdHlsZSIsImRpc3BsYXkiLCJvcGFjaXR5IiwiTE9DQUxfU1RPUkFHRV9MSVNUX1RBU0tQQURfS0VZIiwidGFza1BhZExpc3RzIiwiSlNPTiIsInBhcnNlIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsImNyZWF0ZVRhc2siLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwicHJpb3JpdHkiLCJkYXRlIiwidGhpcyIsImUiLCJwcmV2ZW50RGVmYXVsdCIsImNsZWFyRWxlbWVudCIsImZvcm0iLCJ0YXNrIiwidmFsdWUiLCJzZWxlY3RlZExpc3RJZCIsInVuc2hpZnQiLCJsaXN0cyIsImZpbmQiLCJsaXN0IiwiaWQiLCJ0YXNrcyIsInNhdmVBbmRSZW5kZXIiLCJyZXNldCIsIkxPQ0FMX1NUT1JBR0VfTElTVF9LRVkiLCJMT0NBTF9TVE9SQUdFX1NFTEVDVEVEX0xJU1RfSURfS0VZIiwic2V0SXRlbSIsInN0cmluZ2lmeSIsInJlbmRlciIsImZvckVhY2giLCJwcm9qZWN0QnV0dG9uIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsImRhdGFzZXQiLCJsaXN0SWQiLCJpbm5lclRleHQiLCJuYW1lIiwiZGVsZXRlTGlzdEljb24iLCJyZW1vdmVDaGlsZCIsImZpbHRlciIsImFwcGVuZENoaWxkIiwicmVtb3ZlIiwidGFza0NvbnRlbnQiLCJ0YXNrTGlzdCIsInRhc2tJdGVtIiwicHJpb3JpdHlJdGVtIiwiZGF0ZUl0ZW0iLCJ0aXRsZUl0ZW0iLCJkZXNjcmlwdGlvbkl0ZW0iLCJjaGVja2JveEdyb3VwIiwiY2hlY2tib3hJdGVtIiwic3BsaWNlIiwidHlwZSIsImxhYmVsSXRlbSIsImZvciIsImRlbGV0ZUl0ZW0iLCJ0b2RvIiwiY3Vyckxpc3QiLCJ0b2RvcyIsInJlbmRlclRhc2tzIiwiZWxlbWVudCIsImZpcnN0Q2hpbGQiLCJ0YXJnZXQiLCJ0YWdOYW1lIiwidG9Mb3dlckNhc2UiLCJsaXN0TmFtZSIsImFsZXJ0IiwiRGF0ZSIsIm5vdyIsInRvU3RyaW5nIiwicHVzaCJdLCJzb3VyY2VSb290IjoiIn0=